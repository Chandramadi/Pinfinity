<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed</title>
    <link rel="shortcut icon" href="/images/Pinfinity.ico" type="image/x-icon">
    <link rel="stylesheet" href="/stylesheets/feed.css">
</head>

<body>

    <nav class="navbar">
        <img src="/images/Pinfinity.png" alt="pin logo"
            class="img1" />
        <a href="#" class="nav-link">Pinterest</a>
        <a href="/profile" class="nav-link nav-link-differ">Profile</a>
        <a href="/profile/posts" class="nav-link nav-link-differ">Posts</a>
        <a href="/logout" class="btn-custom">Log Out</a>
    </nav>

    <div class="cards">
        <% posts.forEach(function(post){ %>
            <div class="card">
                <img class="card-img" src="/images/uploads/<%=post.image %>" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title"><%=post.caption%></h5>
                    <p class="card-title username">@<%=post.user.username%></a>
                    <% 
                        const today = new Date(post.createdAt);
                        const yyyy = today.getFullYear();
                        let mm = today.getMonth() + 1;   <!-- Months start at 0!  -->
                        let dd = today.getDate();

                        if (dd < 10) dd = '0' + dd;
                        if (mm < 10) mm = '0' + mm;

                        const formattedToday = dd + '/' + mm + '/' + yyyy;
                    %>
                    <p class="card-date"><%=formattedToday%></p>
                </div>
            </div>
        <% }) %>
    </div>

    <!-- Modal structure -->
    <div id="cardModal" class="modal">
        <span class="close">&times;</span>
        <div class="modal-content">
            <img id="modalImg" class="modal-img" src="" alt="Card image">
            <h5 id="modalTitle" class="modal-title"></h5>
            <p id="modalCaption" class="modal-caption"></p>
            <p id="modalDate" class="modal-date"></p>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2024 Pinfinity. All rights reserved.</p>
        <p><a href="#">About</a> | <a href="#">Contact</a> | <a href="#">Privacy Policy</a></p>
    </footer>

    <script src="/javascripts/feed.js"></script>


</body>

</html>